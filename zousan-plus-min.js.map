{"version":3,"file":"zousan-plus-min.js","sources":["node_modules/zousan/zousan-esm-min.js","src/zousan-plus.js"],"sourcesContent":["var STATE_PENDING,_undefined,STATE_FULFILLED=\"fulfilled\",STATE_REJECTED=\"rejected\",_undefinedString=\"undefined\",soon=function(){var e=[],t=0,n=1024;function o(){for(;e.length-t;){try{e[t]()}catch(e){global.console&&global.console.error(e)}e[t++]=_undefined,t==n&&(e.splice(0,n),t=0)}}var r=function(){if(typeof MutationObserver!==_undefinedString){var e=document.createElement(\"div\");return new MutationObserver(o).observe(e,{attributes:!0}),function(){e.setAttribute(\"a\",0)}}return typeof process!==_undefinedString&&\"function\"==typeof process.nextTick?function(){process.nextTick(o)}:typeof setImmediate!==_undefinedString?function(){setImmediate(o)}:function(){setTimeout(o,0)}}();return function(n){e.push(n),e.length-t==1&&r()}}();function Zousan(e){if(!(this instanceof Zousan))throw new TypeError(\"Zousan must be created with the new keyword\");if(\"function\"==typeof e){var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}else if(arguments.length>0)throw new TypeError(\"Zousan resolver \"+e+\" is not a function\")}function resolveClient(e,t){if(\"function\"==typeof e.y)try{var n=e.y.call(_undefined,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function rejectClient(e,t){if(\"function\"==typeof e.n)try{var n=e.n.call(_undefined,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}Zousan.prototype={resolve:function(e){if(this.state===STATE_PENDING){if(e===this)return this.reject(new TypeError(\"Attempt to resolve promise with self\"));var t=this;if(e&&(\"function\"==typeof e||\"object\"==typeof e))try{var n=!0,o=e.then;if(\"function\"==typeof o)return void o.call(e,function(e){n&&(n=!1,t.resolve(e))},function(e){n&&(n=!1,t.reject(e))})}catch(e){return void(n&&this.reject(e))}this.state=STATE_FULFILLED,this.v=e,t.c&&soon(function(){for(var n=0,o=t.c.length;n<o;n++)resolveClient(t.c[n],e)})}},reject:function(e){if(this.state===STATE_PENDING){var t=this;this.state=STATE_REJECTED,this.v=e;var n=this.c;soon(n?function(){for(var t=0,o=n.length;t<o;t++)rejectClient(n[t],e)}:function(){t.handled||!Zousan.suppressUncaughtRejectionError&&global.console&&Zousan.warn(\"You upset Zousan. Please catch rejections: \",e,e?e.stack:null)})}},then:function(e,t){var n=new Zousan,o={y:e,n:t,p:n};if(this.state===STATE_PENDING)this.c?this.c.push(o):this.c=[o];else{var r=this.state,i=this.v;this.handled=!0,soon(function(){r===STATE_FULFILLED?resolveClient(o,i):rejectClient(o,i)})}return n},catch:function(e){return this.then(null,e)},finally:function(e){return this.then(e,e)},timeout:function(e,t){t=t||\"Timeout\";var n=this;return new Zousan(function(o,r){setTimeout(function(){r(Error(t))},e),n.then(function(e){o(e)},function(e){r(e)})})}},Zousan.resolve=function(e){var t=new Zousan;return t.resolve(e),t},Zousan.reject=function(e){var t=new Zousan;return t.c=[],t.reject(e),t},Zousan.all=function(e){var t=[],n=0,o=new Zousan;function r(r,i){r&&\"function\"==typeof r.then||(r=Zousan.resolve(r)),r.then(function(r){t[i]=r,++n==e.length&&o.resolve(t)},function(e){o.reject(e)})}for(var i=0;i<e.length;i++)r(e[i],i);return e.length||o.resolve(t),o},Zousan.warn=console.warn,Zousan.soon=soon;export default Zousan;\n","// zousan-plus : Extensions for Zousan Promises\n// Home: https://github.com/bluejava/zousan-plus\n// Author: Glenn Crownover <glenn@bluejava.com> (http://www.bluejava.com)\n// License: MIT\n\nimport Zousan from \"zousan\"\n\n/* ==== map ==== */\n\nfunction map(iter, fn) {\n\n\t\tif(iter.then)\n\t\t\treturn iter.then(function(iterResolved) {\n\t\t\t\t\treturn map(iterResolved, fn)\n\t\t\t\t})\n\t\telse\n\t\t\tif(iter.map)\n\t\t\t\treturn map2(iter, fn)\n\t\t\telse\n\t\t\t\tthrow Error(\"first argument must be a promise or an iterable\")\n\t}\n\nfunction map2(iter, fn)\n{\n\treturn Zousan.all(\n\t\t\titer.map(function(item) {\n\t\t\t\t\treturn item.then ? item.then(fn) : fn(item)\n\t\t\t\t})\n\t)\n}\n\n/* ==== END map ==== */\n\n/* ====== Series ====== */\n\n// Handles the results of the evaluation of an item in the series\nfunction processSeriesResult(ar, i, results, val)\n{\n\tresults[i] = val\n\ti++\n\tif(ar.length > i)\n\t\treturn processSeriesItem(ar, i, results, val)\n\telse\n\t\treturn val\n}\n\n// Handles the evaluation of an item in the series.\nfunction processSeriesItem(ar, i, results, inval)\n{\n\tvar nextVal = ar[i]\n\n\tif(typeof nextVal === \"function\")\n\t\tnextVal = nextVal.call(null, inval) // eslint-disable-line no-useless-call\n\n\tif(nextVal && nextVal.then)\n\t\treturn nextVal.then(function(resVal) {\n\t\t\t\treturn processSeriesResult(ar, i, results, resVal)\n\t\t\t})\n\n\treturn processSeriesResult(ar, i, results, nextVal)\n}\n\n/*\n\tTracking Series\n\n\tEvaluates each item in a series, tracking each result in an array that is returned\n\talong with the final promise of the series completion.\n\n\tExample:\n\n\tvar ts = tSeries(1,2,3,add6,add3Later)\n\tts.prom.then(function(final) {\n\t\t\t// ts.res[0] = 1\n\t\t\t// ts.res[3] = 9\n\t\t\t// ts.res[4] = 12\n\t\t\t// final = 12\n\t\t})\n*/\n\n\nfunction tSeries(ar)\n{\n\t// We accept either an array or items specified as individual arguments...\n\tif(!ar) return undefined\n\n\t// ...but we convert the series into an array either way\n\tif(arguments.length > 1 || !Array.isArray(ar))\n\t\tar = Array.prototype.slice.call(arguments)\n\n\tvar z = new Zousan(),\n\t\tresults = [ ]\n\n\t// throw the processing on the microtask queue to allow items in the\n\t// series reference the results (i.e. return from this function before processing)\n\tZousan.soon(function() {\n\t\t\ttry\n\t\t\t{\n\t\t\t\tz.resolve(processSeriesItem(ar, 0, results))\n\t\t\t}\n\t\t\tcatch(er) { z.reject(er) }\n\t\t})\n\n\treturn { prom: z, res: results } // return promise and results in \"prom\" and \"res\" properties\n}\n\n// The series utility is simply a tracking series that ignores the results tracking and returns\n// a promise directly\nfunction series()\n{\n\treturn tSeries.apply(null, arguments).prom\n}\n\n/* ===== END series / tSeries ====== */\n\n\n/*\n\n\t==== promisify ====\n\n\tUsage:\n\tvar fs = Zousan.promisify(require(\"fs\"))\n\tfs.readFileProm(name, { encoding: \"utf-8\"})\n\t\t.then(function(contents) {\n\t\t\t\t// contents of file available here\n\t\t\t})\n\t\t.catch(function(err) {\n\t\t\t\t// handle errors here\n\t\t\t})\n\n*/\n\nvar defaultCBArgNames = [ \"cb\", \"callback\", \"done\", \"callback_\" ]\nfunction shouldPromisify(ob, conf)\n{\n\t// no need for argument inspection if promisifyAll is specified\n\tif(conf.promisifyAll)\n\t\treturn true\n\n\tif(conf.fnNames)\n\t\treturn conf.fnNames.indexOf(ob.name) >= 0\n\n\tvar cbArgNames = conf.cbArgNames || defaultCBArgNames\n\n\tvar args = getArgs(ob)\n\tif(args && args.length)\n\t{\n\t\tvar lastArg = args[args.length - 1]\n\t\tif(cbArgNames.indexOf(lastArg) >= 0)\n\t\t\treturn true\n\t}\n\n\treturn false\n}\n\nfunction promisifyFn(fn)\n{\n\treturn function() {\n\t\t\tvar ca = Array.prototype.splice.call(arguments, 0),\n\t\t\t\tme = this\n\t\t\treturn new Zousan(function(resolve, reject) {\n\t\t\t\t\tca.push(function(er, val) {\n\t\t\t\t\t\t\tif(er)\n\t\t\t\t\t\t\t\treject(er)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(val)\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfn.apply(me, ca)\n\t\t\t\t})\n\t\t}\n}\n\nfunction promisify(ob, conf)\n{\n\tconf = conf || {}\n\n\tif(typeof ob === \"function\")\n\t\treturn promisifyFn(ob)\n\n\tfor(var n in ob)\n\t\tif(typeof ob[n] === \"function\")\n\t\t\tif(shouldPromisify(ob[n], conf))\n\t\t\t\tob[n + Zousan.PROMISIFY_FN_EXTENSION] = promisifyFn(ob[n])\n\n\treturn ob\n}\n\n// extracts the argument names of a function into an array of strings\n// any commented-out arguments are ignored.\n// i.e.  if myFunc = function(a,b,c) { ... }\n//  getArgs(myFunc) --> [ \"a\",\"b\",\"c\" ]\nfunction getArgs(func)\n{\n\tvar args = func.toString().match(/function\\s.*?\\(([^)]*)\\)/)\n\treturn (!args || args.length < 2)\n\t\t? null\n\t\t: args[1]\n\t\t\t.replace(/\\/\\*.*\\*\\//, \"\")\n\t\t\t.split(\",\")\n\t\t\t.map(trim)\n}\n\nfunction trim(s) { return s.trim() }\n\n// The extension for all promisified versions of functions. Change to \"\" to replace originals (not recommended)\nZousan.PROMISIFY_FN_EXTENSION = \"Prom\"\n\n\n/*\n\n\t\tnamedAll(valuesObject) -> Promise - just like Promise.all except each item is a name/value pair and the resolved value is\n\t\t\tan object with name/value pairs with the resolved values. A mix of values, functions, and promises\n\t\t\tcan be used as values. Promises and functions that return promises are first resolved before assigned.\n\n\t\tExample:\n\t\t\treturn Zousan.namedAll({\n\t\t\t\t\tid: userId,  // Integer\n\t\t\t\t\tpb: startProgressBar, // function whose return is ignored\n\t\t\t\t\tuser: getUser(userId), // returns a promise\n\t\t\t\t\titems: getUserItemList(userId) // returns a promise\n\t\t\t\t})\n\t\t\t\t.then(function(ob) {\n\t\t\t\t\t\t// Here ob contains the following:\n\t\t\t\t\t\t// { id: userId, pb: <??>, user: userObject <from resolved promise>, items: itemList <from promise> }\n\t\t\t\t\t\tendProgressBar()\n\t\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\t\t// lets hope this doesn't happen!\n\t\t\t\t\t})\n\n\t\tNote: With function values, you can put the parens in (execute immediately) or not. If you do, it is executed BEFORE calling\n\t\tZousan.namedAll and its result (which can be a promise) is assigned (or resolved and assigned). If you do not, namedAll will\n\t\tdetect its a function and call it (with no arguments)\n\n*/\n\nfunction namedAll(ob)\n{\n\t// First gather ordered lists of keys and values respectively. While we are at it,\n\t// \tevaluate any functions, since Promise.all does not offer that.\n\tvar keys = Object.keys(ob),\n\t\tvalues = keys.map(function(key) {\n\t\t\t\tif(typeof ob[key] === \"function\")\n\t\t\t\t\treturn ob[key].apply(null)\n\t\t\t\telse\n\t\t\t\t\treturn ob[key]\n\t\t\t})\n\n\t// Zousan.all expects an array of values (mixed promises/non-promises ok)\n\treturn Zousan.all(values)\n\t\t.then(function(ret) {\n\t\t\t\t// Once all promises are resolved, we match them up with their keys\n\t\t\t\t// based on the ordering\n\t\t\t\tvar retOb = { }\n\t\t\t\tkeys.forEach(function(name, i) {\n\t\t\t\t\t\tretOb[name] = ret[i]\n\t\t\t\t\t})\n\t\t\t\treturn retOb\n\t\t\t})\n}\n\n\nfunction evaluate(ar) // eslint-disable-line no-shadow-restricted-names\n{\n\t// We accept either an array or items specified as individual arguments...\n\t// ...but we convert the series into an array either way\n\tif(!Array.isArray(ar))\n\t\tar = Array.prototype.slice.call(arguments)\n\n\tvar items = { } // map names to items\n\n\t// This forEach is where it all happens - we evaluate each item within the eval array.\n\t// If there are dependencies, those are first resolved.\n\t// Its the mother of all promise workflows is just 10 lines!\n\tar.forEach(function(zex, i) {\n\t\titems[zex.name || (\"_p\" + i)] =\n\t\t\tZousan.all((zex.deps || []).map(function(arg) {\n\t\t\t\t\t\t// even if items[arg] is undefined, using \"arg in items\" is true when the property exists\n\t\t\t\t\t\tif(typeof arg === \"string\" && arg in items)\n\t\t\t\t\t\t\treturn items[arg]\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn arg\n\t\t\t\t\t}))\n\t\t\t\t.then(function(dResults) {\n\t\t\t\t\t\tvar value = zex.value\n\t\t\t\t\t\tif(typeof value === \"function\")\n\t\t\t\t\t\t\tvalue = value.apply(null, dResults)\n\t\t\t\t\t\treturn value\n\t\t\t\t\t})\n\t\t})\n\n\t// Now we just wait for each promise to complete - then assign the resolved value to its named property\n\tvar names = Object.keys(items),\n\t\titemVals = names.map(function(name) { return items[name] }) // Object.values()\n\n\treturn Zousan.all(itemVals)\n\t\t.then(function(paResults) {\n\t\t\t\tvar results = { }\n\t\t\t\tnames.forEach(function(name, i) {\n\t\t\t\t\t\tresults[name] = paResults[i]\n\t\t\t\t\t})\n\t\t\t\treturn results\n\t\t\t})\n}\n\n\nZousan.evaluate = evaluate\nZousan.map = map\nZousan.namedAll = namedAll\nZousan.promisify = promisify\nZousan.promisifyFn = promisifyFn\nZousan.series = series\nZousan.tSeries = tSeries\n\nexport default Zousan\n"],"names":["STATE_PENDING","_undefined","e","t","r","STATE_FULFILLED","_undefinedString","soon","MutationObserver","process","nextTick","o","setImmediate","setTimeout","document","createElement","observe","attributes","setAttribute","n","push","length","global","console","error","splice","Zousan","this","TypeError","resolve","reject","arguments","resolveClient","y","call","p","rejectClient","processSeriesResult","ar","i","results","val","processSeriesItem","inval","nextVal","then","resVal","tSeries","Array","isArray","prototype","slice","z","er","prom","res","state","v","c","handled","suppressUncaughtRejectionError","warn","stack","catch","finally","timeout","Error","all","defaultCBArgNames","shouldPromisify","ob","conf","promisifyAll","fnNames","indexOf","name","cbArgNames","args","func","toString","match","replace","split","map","trim","getArgs","lastArg","promisifyFn","fn","ca","me","apply","s","PROMISIFY_FN_EXTENSION","evaluate","items","forEach","zex","deps","arg","dResults","value","names","Object","keys","itemVals","paResults","iter","iterResolved","item","map2","namedAll","values","key","ret","retOb","promisify","series"],"mappings":"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"}